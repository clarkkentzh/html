<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>惰性单例对象</title>
  </head>
  <body>
    <script type="text/javascript">

      var singleton = (function(){

    //为了保证对象的唯一性而定义的变量
        var exit = null;


    //产生一个对象Person
        function Person(){
          var a = 10;

          function _addA(){
            a += 1;
          }
          function _subA(){
            a -= 1;
          }
          function _getA(){
            return a;
          }

          return {
            getAs:function(){
              return _getA();
            },
            addAs:function(){
              _addA();
            },
            subAs:function(){
              _subA();
            }
          };
        }

      //为了保证使用时产生单例，而封装的方法
        return {
          getInstance:function(){
            if(!exit){
              exit = Person();
            }
            return exit;
          }
        }
      })();


    //下面使用的都是相同的属性，方法
      var one = singleton.getInstance();
      var two = singleton.getInstance();
      console.log(one === two);
      one.addAs();
      console.log(two.getAs());//11



    </script>
  </body>
</html>
